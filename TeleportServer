local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: —Å–æ–∑–¥–∞–µ–º –æ–¥–∏–Ω –∑–≤—É–∫–æ–≤–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
local soundContainer = Instance.new("Folder")
soundContainer.Name = "TeleportGUISounds"
soundContainer.Parent = playerGui

-- –°–æ–∑–¥–∞–µ–º –∑–≤—É–∫–∏ —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –æ—à–∏–±–æ–∫
local function createSound(soundId, volume)
    local sound = Instance.new("Sound")
    sound.SoundId = soundId
    sound.Volume = volume
    sound.Parent = soundContainer
    return sound
end

local clickSound = createSound("rbxassetid://177266782", 0.4)
local altClickSound = createSound("rbxassetid://5786309572", 0.3)
local hoverSound = createSound("rbxassetid://8763180073", 0.2)

-- –û—Å–Ω–æ–≤–Ω–æ–π GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "TeleportGUI"
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞
local colorPalette = {
    primary = Color3.fromRGB(147, 112, 219),    -- –§–∏–æ–ª–µ—Ç–æ–≤—ã–π
    secondary = Color3.fromRGB(255, 105, 180),  -- –†–æ–∑–æ–≤—ã–π
    accent = Color3.fromRGB(64, 224, 208),      -- –ë–∏—Ä—é–∑–æ–≤—ã–π
    dark = Color3.fromRGB(30, 30, 46),
    light = Color3.fromRGB(245, 245, 255),
    success = Color3.fromRGB(76, 175, 80),
    error = Color3.fromRGB(244, 67, 54),
    warning = Color3.fromRGB(255, 193, 7),
    background = Color3.fromRGB(25, 25, 35)
}

-- –ù–û–í–´–ô –†–ê–ó–ú–ï–† –ö–†–£–ì–ê (–∏–∑–º–µ–Ω–∏—Ç–µ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ –≤–∞—à–µ–º—É —É—Å–º–æ—Ç—Ä–µ–Ω–∏—é)
local CIRCLE_SIZE = 60  -- –≤–º–µ—Å—Ç–æ 70
local CIRCLE_HOVER_SIZE = 65 -- –≤–º–µ—Å—Ç–æ 75

-- –ö–†–ê–°–ò–í–ê–Ø –ö–ù–û–ü–ö–ê –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –ú–ï–ù–Æ
local toggleButton = Instance.new("ImageButton")
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(0, CIRCLE_SIZE, 0, CIRCLE_SIZE) -- –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä
toggleButton.Position = UDim2.new(0, 25, 0, 25)
toggleButton.BackgroundColor3 = colorPalette.primary
toggleButton.Image = ""
toggleButton.ScaleType = Enum.ScaleType.Crop
toggleButton.Active = true
toggleButton.Draggable = true
toggleButton.Parent = screenGui

-- –î–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É –∫—Ä—É–≥–ª–æ–π
local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(1, 0)
buttonCorner.Parent = toggleButton

-- –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω –¥–ª—è –∫–Ω–æ–ø–∫–∏
local buttonGradient = Instance.new("UIGradient")
buttonGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, colorPalette.primary),
    ColorSequenceKeypoint.new(1, colorPalette.secondary)
})
buttonGradient.Rotation = 45
buttonGradient.Parent = toggleButton

-- –°—Ç–∏–ª—å–Ω–∞—è –æ–±–≤–æ–¥–∫–∞
local buttonStroke = Instance.new("UIStroke")
buttonStroke.Color = Color3.fromRGB(255, 255, 255)
buttonStroke.Thickness = 2
buttonStroke.Transparency = 0.2
buttonStroke.Parent = toggleButton

-- –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ç–µ–Ω—å –¥–ª—è –≥–ª—É–±–∏–Ω–∞
local innerShadow = Instance.new("ImageLabel")
innerShadow.Name = "InnerShadow"
innerShadow.Image = "rbxassetid://9570694360"
innerShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
innerShadow.ImageTransparency = 0.7
innerShadow.Size = UDim2.new(1, 0, 1, 0)
innerShadow.BackgroundTransparency = 1
innerShadow.ZIndex = toggleButton.ZIndex + 1
innerShadow.Parent = toggleButton

-- –ò–∫–æ–Ω–∫–∞ –º–µ–Ω—é (–±—É—Ä–≥–µ—Ä-–∏–∫–æ–Ω–∫–∞)
local menuIcon = Instance.new("Frame")
menuIcon.Name = "MenuIcon"
menuIcon.Size = UDim2.new(0, 25, 0, 20) -- –£–º–µ–Ω—å—à–µ–Ω–Ω–∞—è –∏–∫–æ–Ω–∫–∞ –¥–ª—è –º–µ–Ω—å—à–µ–≥–æ –∫—Ä—É–≥–∞
menuIcon.Position = UDim2.new(0.5, -12.5, 0.5, -10) -- –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
menuIcon.BackgroundTransparency = 1
menuIcon.Parent = toggleButton

-- –¢—Ä–∏ –ª–∏–Ω–∏–∏ –±—É—Ä–≥–µ—Ä-–∏–∫–æ–Ω–∫–∏
for i = 1, 3 do
    local line = Instance.new("Frame")
    line.Name = "Line" .. i
    line.Size = UDim2.new(1, 0, 0, 2.5) -- –ë–æ–ª–µ–µ —Ç–æ–Ω–∫–∏–µ –ª–∏–Ω–∏–∏
    line.Position = UDim2.new(0, 0, (i-1)/3, 0)
    line.BackgroundColor3 = Color3.new(1, 1, 1)
    line.BorderSizePixel = 0
    
    local lineCorner = Instance.new("UICorner")
    lineCorner.CornerRadius = UDim.new(1, 0)
    lineCorner.Parent = line
    
    line.Parent = menuIcon
end

-- –í–Ω–µ—à–Ω—è—è —Ç–µ–Ω—å –¥–ª—è –∫–Ω–æ–ø–∫–∏
local buttonShadow = Instance.new("ImageLabel")
buttonShadow.Name = "Shadow"
buttonShadow.Image = "rbxassetid://5554236805"
buttonShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
buttonShadow.ImageTransparency = 0.85
buttonShadow.ScaleType = Enum.ScaleType.Slice
buttonShadow.SliceCenter = Rect.new(10, 10, 118, 118)
buttonShadow.Size = UDim2.new(1, 12, 1, 12) -- –£–º–µ–Ω—å—à–µ–Ω–Ω–∞—è —Ç–µ–Ω—å
buttonShadow.Position = UDim2.new(0, -6, 0, -6) -- –ü–æ–∑–∏—Ü–∏—è –¥–ª—è –Ω–æ–≤–æ–π —Ç–µ–Ω–∏
buttonShadow.BackgroundTransparency = 1
buttonShadow.ZIndex = toggleButton.ZIndex - 1
buttonShadow.Parent = toggleButton

-- –≠—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
local hoverGlow = Instance.new("ImageLabel")
hoverGlow.Name = "HoverGlow"
hoverGlow.Image = "rbxassetid://9593007886"
hoverGlow.ImageColor3 = colorPalette.secondary
hoverGlow.ImageTransparency = 0.9
hoverGlow.Size = UDim2.new(1.5, 0, 1.5, 0)
hoverGlow.Position = UDim2.new(-0.25, 0, -0.25, 0)
hoverGlow.BackgroundTransparency = 1
hoverGlow.ZIndex = toggleButton.ZIndex - 1
hoverGlow.Visible = false
hoverGlow.Parent = toggleButton

-- –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º –º–µ–Ω—é
local frame = Instance.new("Frame")
frame.Name = "MainFrame"
frame.Size = UDim2.new(0, 320, 0, 250)
frame.Position = UDim2.new(0.5, -160, 0.5, -125)
frame.BackgroundColor3 = colorPalette.background
frame.BorderSizePixel = 0
frame.Visible = false
frame.ClipsDescendants = true
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

-- –¢–µ–Ω—å –¥–ª—è —Ñ—Ä–µ–π–º–∞
local frameShadow = Instance.new("ImageLabel")
frameShadow.Name = "Shadow"
frameShadow.Image = "rbxassetid://5554236805"
frameShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
frameShadow.ImageTransparency = 0.8
frameShadow.ScaleType = Enum.ScaleType.Slice
frameShadow.SliceCenter = Rect.new(10, 10, 118, 118)
frameShadow.Size = UDim2.new(1, 20, 1, 20)
frameShadow.Position = UDim2.new(0, -10, 0, -10)
frameShadow.BackgroundTransparency = 1
frameShadow.ZIndex = frame.ZIndex - 1
frameShadow.Parent = frame

-- –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤ —Ñ—Ä–µ–π–º–∞
local frameCorner = Instance.new("UICorner")
frameCorner.CornerRadius = UDim.new(0, 15)
frameCorner.Parent = frame

-- –§–∏–æ–ª–µ—Ç–æ–≤–∞—è –æ–±–≤–æ–¥–∫–∞ —Ñ—Ä–µ–π–º–∞
local frameStroke = Instance.new("UIStroke")
frameStroke.Color = colorPalette.primary
frameStroke.Thickness = 2
frameStroke.Transparency = 0.2
frameStroke.Parent = frame

-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å —ç–º–æ–¥–∑–∏
local titleLabel = Instance.new("TextLabel")
titleLabel.Name = "TitleLabel"
titleLabel.Size = UDim2.new(1, -40, 0, 40)
titleLabel.Position = UDim2.new(0, 20, 0, 10)
titleLabel.Text = "üåÜ TELEPORT MENU"
titleLabel.BackgroundTransparency = 1
titleLabel.TextColor3 = Color3.new(1, 1, 1)
titleLabel.Font = Enum.Font.Gotham
titleLabel.TextSize = 18
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.Parent = frame

-- –ü–æ–ª–µ –≤–≤–æ–¥–∞
local textBox = Instance.new("TextBox")
textBox.Name = "PlaceIdTextBox"
textBox.Size = UDim2.new(0.9, 0, 0, 40)
textBox.Position = UDim2.new(0.05, 0, 0, 60)
textBox.ClearTextOnFocus = true
textBox.PlaceholderText = "–í–≤–µ–¥–∏—Ç–µ Place ID –∏–ª–∏ —Å—Å—ã–ª–∫—É..."
textBox.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
textBox.TextColor3 = Color3.new(1, 1, 1)
textBox.Font = Enum.Font.Gotham
textBox.TextSize = 14
textBox.Parent = frame

-- –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ –∏ –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—è
local textBoxCorner = Instance.new("UICorner")
textBoxCorner.CornerRadius = UDim.new(0, 8)
textBoxCorner.Parent = textBox

local textBoxPadding = Instance.new("UIPadding")
textBoxPadding.PaddingLeft = UDim.new(0, 12)
textBoxPadding.PaddingRight = UDim.new(0, 12)
textBoxPadding.Parent = textBox

-- –û–±–≤–æ–¥–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—è
local textBoxStroke = Instance.new("UIStroke")
textBoxStroke.Color = Color3.fromRGB(80, 80, 100)
textBoxStroke.Thickness = 1
textBoxStroke.Transparency = 0.3
textBoxStroke.Parent = textBox

-- –ö–Ω–æ–ø–∫–∞ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ —Å —ç–º–æ–¥–∑–∏
local teleportButton = Instance.new("TextButton")
teleportButton.Name = "TeleportButton"
teleportButton.Size = UDim2.new(0.9, 0, 0, 45)
teleportButton.Position = UDim2.new(0.05, 0, 0, 110)
teleportButton.Text = "üöÄ START TELEPORT"
teleportButton.BackgroundColor3 = colorPalette.success
teleportButton.TextColor3 = Color3.new(1, 1, 1)
teleportButton.Font = Enum.Font.Gotham
teleportButton.TextSize = 16
teleportButton.Parent = frame

local teleportButtonCorner = Instance.new("UICorner")
teleportButtonCorner.CornerRadius = UDim.new(0, 10)
teleportButtonCorner.Parent = teleportButton

-- –û–±–≤–æ–¥–∫–∞ –∫–Ω–æ–ø–∫–∏ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏
local teleportButtonStroke = Instance.new("UIStroke")
teleportButtonStroke.Color = Color3.fromRGB(255, 255, 255)
teleportButtonStroke.Thickness = 1
teleportButtonStroke.Transparency = 0.3
teleportButtonStroke.Parent = teleportButton

-- –°—Ç–∞—Ç—É—Å-–ª–µ–π–±–ª
local statusLabel = Instance.new("TextLabel")
statusLabel.Name = "StatusLabel"
statusLabel.Size = UDim2.new(0.9, 0, 0, 40)
statusLabel.Position = UDim2.new(0.05, 0, 0, 165)
statusLabel.Text = "–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ"
statusLabel.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
statusLabel.BackgroundTransparency = 0.5
statusLabel.TextColor3 = Color3.new(1, 1, 1)
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextSize = 14
statusLabel.TextXAlignment = Enum.TextXAlignment.Center
statusLabel.TextYAlignment = Enum.TextYAlignment.Center
statusLabel.Parent = frame

local statusCorner = Instance.new("UICorner")
statusCorner.CornerRadius = UDim.new(0, 8)
statusCorner.Parent = statusLabel

-- –û–±–≤–æ–¥–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
local statusStroke = Instance.new("UIStroke")
statusStroke.Color = Color3.fromRGB(80, 80, 100)
statusStroke.Thickness = 1
statusStroke.Transparency = 0.3
statusStroke.Parent = statusLabel

-- –ö—Ä—É–≥–ª–∞—è –∫–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Position = UDim2.new(1, -35, 0, 10)
closeButton.Text = "X"
closeButton.BackgroundColor3 = colorPalette.error
closeButton.TextColor3 = Color3.new(1, 1, 1)
closeButton.Font = Enum.Font.GothamBold
closeButton.TextSize = 16
closeButton.Parent = frame

-- –î–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è –∫—Ä—É–≥–ª–æ–π
local closeButtonCorner = Instance.new("UICorner")
closeButtonCorner.CornerRadius = UDim.new(1, 0)
closeButtonCorner.Parent = closeButton

-- –û–±–≤–æ–¥–∫–∞ –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
local closeButtonStroke = Instance.new("UIStroke")
closeButtonStroke.Color = Color3.fromRGB(255, 100, 100)
closeButtonStroke.Thickness = 1
closeButtonStroke.Transparency = 0.3
closeButtonStroke.Parent = closeButton

-- –¢–µ–∫—Å—Ç "by @TeleportMenu" –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É
local creditLabel = Instance.new("TextLabel")
creditLabel.Name = "CreditLabel"
creditLabel.Size = UDim2.new(0, 120, 0, 20)
creditLabel.Position = UDim2.new(1, -125, 1, -25) -- –ü—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª
creditLabel.Text = "by @TeleportMenu"
creditLabel.BackgroundTransparency = 1
creditLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
creditLabel.Font = Enum.Font.Gotham
creditLabel.TextSize = 12
creditLabel.TextXAlignment = Enum.TextXAlignment.Right
creditLabel.Parent = frame

-- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: –∫—ç—à–∏—Ä—É–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
local originalButtonText = teleportButton.Text
local originalStatusText = statusLabel.Text
local originalStatusColor = statusLabel.BackgroundColor3
local originalButtonColor = teleportButton.BackgroundColor3
local errorColor = Color3.fromRGB(150, 50, 50)
local connectingColor = Color3.fromRGB(50, 50, 150)

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏—è –∑–≤—É–∫–∞
local function playClickSound(soundType)
    local sound = soundType == "alt" and altClickSound or (soundType == "hover" and hoverSound or clickSound)
    if sound and sound.IsLoaded ~= false then
        sound:Play()
    end
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫–Ω–æ–ø–∫–∏ –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
local function resetButton()
    teleportButton.Text = originalButtonText
    teleportButton.BackgroundColor3 = originalButtonColor
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
local function resetStatus()
    statusLabel.Text = originalStatusText
    statusLabel.BackgroundColor3 = originalStatusColor
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
local function updateStatus(text, color)
    statusLabel.Text = text
    if color then
        statusLabel.BackgroundColor3 = color
    end
end

-- –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è PlaceId
local function extractPlaceId(input)
    if not input or input == "" then return nil end
    
    -- –ü—Ä—è–º–æ–π —á–∏—Å–ª–æ–≤–æ–π ID
    if tonumber(input) then
        return tonumber(input)
    end
    
    -- URL —Ñ–æ—Ä–º–∞—Ç—ã
    local patterns = {
        "games/(%d+)",
        "places/(%d+)",
        "game%.roblox%.com/games/(%d+)",
        "www%.roblox%.com/games/(%d+)"
    }
    
    for _, pattern in ipairs(patterns) do
        local id = string.match(input, pattern)
        if id and tonumber(id) then
            return tonumber(id)
        end
    end
    
    return nil
end

-- –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏
local function teleport()
    playClickSound("alt")
    
    -- –û–±–Ω–æ–≤–ª—è–µ–º UI
    teleportButton.Text = "üöÄ SERVER JOINING..."
    teleportButton.BackgroundColor3 = Color3.fromRGB(220, 0, 0)
    updateStatus("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É...", connectingColor)
    
    local input = textBox.Text
    local placeId = extractPlaceId(input)
    
    if not placeId then
        updateStatus("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–≤–æ–¥", errorColor)
        delay(2, function()
            if teleportButton then
                resetButton()
                resetStatus()
            end
        end)
        return
    end
    
    -- –ü—ã—Ç–∞–µ–º—Å—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è
    local success, result = pcall(function()
        TeleportService:Teleport(placeId, player)
    end)
    
    if not success then
        updateStatus("–û—à–∏–±–∫–∞: " .. tostring(result):sub(1, 30), errorColor)
        delay(2, function()
            if teleportButton then
                resetButton()
                resetStatus()
            end
        end)
    else
        -- –ï—Å–ª–∏ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –Ω–∞—á–∞–ª–∞—Å—å, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
        delay(10, function()
            if teleportButton then
                resetButton()
                resetStatus()
            end
        end)
    end
end

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–µ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏
teleportButton.MouseButton1Click:Connect(function()
    playClickSound("default")
    teleport()
end)

-- –ê–Ω–∏–º–∞—Ü–∏–∏
local openTweenInfo = TweenInfo.new(0.4, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
local closeTweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)

local isMenuOpen = false

local function openMenu()
    playClickSound("default")
    frame.Visible = true
    frame.Size = UDim2.new(0, 50, 0, 50)
    frame.Position = UDim2.new(0.5, -25, 0.5, -25)
    
    local openTween = TweenService:Create(frame, openTweenInfo, {
        Size = UDim2.new(0, 320, 0, 250),
        Position = UDim2.new(0.5, -160, 0.5, -125)
    })
    
    openTween:Play()
end

local function closeMenu()
    playClickSound("default")
    
    local closeTween = TweenService:Create(frame, closeTweenInfo, {
        Size = UDim2.new(0, 50, 0, 50),
        Position = UDim2.new(0.5, -25, 0.5, -25)
    })
    
    closeTween:Play()
    closeTween.Completed:Connect(function()
        frame.Visible = false
    end)
end

-- –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∏–∫–æ–Ω–∫–∏ –º–µ–Ω—é –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏/–∑–∞–∫—Ä—ã—Ç–∏–∏
local function animateMenuIcon(isOpen)
    local lines = menuIcon:GetChildren()
    local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    
    if isOpen then
        -- –ü—Ä–µ–≤—Ä–∞—â–∞–µ–º –≤ –∫—Ä–µ—Å—Ç–∏–∫
        TweenService:Create(lines[1], tweenInfo, {
            Position = UDim2.new(0, 0, 0.5, -1.5),
            Rotation = 45
        }):Play()
        
        TweenService:Create(lines[2], tweenInfo, {
            BackgroundTransparency = 1
        }):Play()
        
        TweenService:Create(lines[3], tweenInfo, {
            Position = UDim2.new(0, 0, 0.5, -1.5),
            Rotation = -45
        }):Play()
    else
        -- –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤ –±—É—Ä–≥–µ—Ä-–∏–∫–æ–Ω–∫—É
        TweenService:Create(lines[1], tweenInfo, {
            Position = UDim2.new(0, 0, 0, 0),
            Rotation = 0
        }):Play()
        
        TweenService:Create(lines[2], tweenInfo, {
            BackgroundTransparency = 0
        }):Play()
        
        TweenService:Create(lines[3], tweenInfo, {
            Position = UDim2.new(0, 0, 2/3, 0),
            Rotation = 0
        }):Play()
    end
end

local function toggleMenu()
    if isMenuOpen then
        closeMenu()
        animateMenuIcon(false)
    else
        openMenu()
        animateMenuIcon(true)
    end
    isMenuOpen = not isMenuOpen
end

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤
toggleButton.MouseButton1Click:Connect(toggleMenu)
closeButton.MouseButton1Click:Connect(toggleMenu)

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –Ω–∞–≤–µ–¥–µ–Ω–∏—è
local function setupButtonEffects(button)
    local originalSize = button.Size
    local hoverTweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    
    button.MouseEnter:Connect(function()
        playClickSound("hover")
        TweenService:Create(button, hoverTweenInfo, {
            Size = originalSize + UDim2.new(0, 4, 0, 4)
        }):Play()
    end)
    
    button.MouseLeave:Connect(function()
        TweenService:Create(button, hoverTweenInfo, {
            Size = originalSize
        }):Play()
    end)
end

-- –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã –∫–æ –≤—Å–µ–º –∫–Ω–æ–ø–∫–∞–º
setupButtonEffects(teleportButton)
setupButtonEffects(closeButton)

-- –£–ª—É—á—à–µ–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞–≤–µ–¥–µ–Ω–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é
toggleButton.MouseEnter:Connect(function()
    playClickSound("hover")
    
    -- –ê–Ω–∏–º–∞—Ü–∏—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è
    TweenService:Create(toggleButton, TweenInfo.new(0.2), {
        Size = UDim2.new(0, CIRCLE_HOVER_SIZE, 0, CIRCLE_HOVER_SIZE) -- –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
    }):Play()
    
    -- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–≤–µ—á–µ–Ω–∏–µ
    hoverGlow.Visible = true
    TweenService:Create(hoverGlow, TweenInfo.new(0.3), {
        ImageTransparency = 0.7
    }):Play()
    
    -- –ê–Ω–∏–º–∞—Ü–∏—è –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞
    TweenService:Create(buttonGradient, TweenInfo.new(0.3), {
        Rotation = 90
    }):Play()
end)

toggleButton.MouseLeave:Connect(function()
    -- –ê–Ω–∏–º–∞—Ü–∏—è —É–º–µ–Ω—å—à–µ–Ω–∏—è
    TweenService:Create(toggleButton, TweenInfo.new(0.2), {
        Size = UDim2.new(0, CIRCLE_SIZE, 0, CIRCLE_SIZE) -- –í–æ–∑–≤—Ä–∞—Ç –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É
    }):Play()
    
    -- –°–∫—Ä—ã–≤–∞–µ–º —Å–≤–µ—á–µ–Ω–∏–µ
    TweenService:Create(hoverGlow, TweenInfo.new(0.3), {
        ImageTransparency = 0.9
    }):Play()
    hoverGlow.Visible = false
    
    -- –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç
    TweenService:Create(buttonGradient, TweenInfo.new(0.3), {
        Rotation = 45
    }):Play()
end)

-- –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–ª–∞–≤–∏—à–∏ Enter –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º –ø–æ–ª–µ
textBox.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        teleport()
    end
end)

-- –ó–∞—â–∏—Ç–∞ –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–ª–∏–∫–æ–≤
local isTeleporting = false
teleportButton.MouseButton1Click:Connect(function()
    if isTeleporting then return end
    isTeleporting = true
    playClickSound("default")
    teleport()
    
    -- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–Ω—è—Ç–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
    delay(3, function()
        isTeleporting = false
    end)
end)

-- –ü—É–ª—å—Å–∞—Ü–∏—è –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
coroutine.wrap(function()
    while true do
        TweenService:Create(buttonGradient, TweenInfo.new(1.5), {
            Rotation = 135
        }):Play()
        wait(2)
        TweenService:Create(buttonGradient, TweenInfo.new(1.5), {
            Rotation = 45
        }):Play()
        wait(2)
    end
end)()

-- –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ GUI
screenGui.Destroying:Connect(function()
    if soundContainer then
        soundContainer:Destroy()
    end
end)
